{
  "description": "Prototype: Can we append two linked lists with pure Mu projections?",
  "representation": {
    "empty_list": null,
    "list_123": {"head": 1, "tail": {"head": 2, "tail": {"head": 3, "tail": null}}},
    "list_45": {"head": 4, "tail": {"head": 5, "tail": null}}
  },
  "projections": [
    {
      "id": "append.base",
      "comment": "append(null, ys) = ys",
      "pattern": {
        "op": "append",
        "xs": null,
        "ys": {"var": "ys"}
      },
      "body": {"var": "ys"}
    },
    {
      "id": "append.recursive",
      "comment": "append({head:h, tail:t}, ys) = {head:h, tail:append(t, ys)}",
      "pattern": {
        "op": "append",
        "xs": {"head": {"var": "h"}, "tail": {"var": "t"}},
        "ys": {"var": "ys"}
      },
      "body": {
        "head": {"var": "h"},
        "tail": {
          "op": "append",
          "xs": {"var": "t"},
          "ys": {"var": "ys"}
        }
      }
    }
  ],
  "test_case": {
    "input": {
      "op": "append",
      "xs": {"head": 1, "tail": {"head": 2, "tail": null}},
      "ys": {"head": 3, "tail": null}
    },
    "expected_steps": [
      {
        "step": 1,
        "matches": "append.recursive",
        "bindings": {"h": 1, "t": {"head": 2, "tail": null}, "ys": {"head": 3, "tail": null}},
        "result": {
          "head": 1,
          "tail": {
            "op": "append",
            "xs": {"head": 2, "tail": null},
            "ys": {"head": 3, "tail": null}
          }
        }
      },
      {
        "step": 2,
        "matches": "append.recursive",
        "bindings": {"h": 2, "t": null, "ys": {"head": 3, "tail": null}},
        "result": {
          "head": 1,
          "tail": {
            "head": 2,
            "tail": {
              "op": "append",
              "xs": null,
              "ys": {"head": 3, "tail": null}
            }
          }
        }
      },
      {
        "step": 3,
        "matches": "append.base",
        "bindings": {"ys": {"head": 3, "tail": null}},
        "result": {
          "head": 1,
          "tail": {
            "head": 2,
            "tail": {"head": 3, "tail": null}
          }
        }
      },
      {
        "step": 4,
        "comment": "No more 'op: append' in structure - STALL (complete)",
        "result": {
          "head": 1,
          "tail": {
            "head": 2,
            "tail": {"head": 3, "tail": null}
          }
        }
      }
    ]
  },
  "verification": {
    "finite_projections": true,
    "works_for_empty": "append(null, ys) = ys - yes, via append.base",
    "works_for_single": "append({head:1,tail:null}, ys) - yes, one recursive then base",
    "works_for_many": "append(list_123, list_45) - yes, 3 recursive then base",
    "no_host_operations": true,
    "kernel_provides_iteration": "Each step reduces one 'op:append' node"
  },
  "discovery": {
    "date": "2025-01-25",
    "issue": "Current step() only matches at root level",
    "example": "After step 1, {head:1, tail:{op:append,...}} - nested append not matched",
    "solution": "deep_step - recursively descend to find matching sub-expressions",
    "implication": "EVAL_SEED needs deep_step for recursive data structures",
    "options": [
      "Add deep_step as host recursion debt (temporary scaffolding)",
      "Express deep_step as projections using work-stack (pure structural)"
    ]
  }
}
